#+title: Majutsu - Emacs Interface for Jujutsu

Majutsu provides a Magit-style interface for [[https://github.com/jj-vcs/jj][Jujutsu (jj)]], offering an
efficient way to interact with JJ repositories from within Emacs.

[[file:docs/majutsu.org][Read the full manual]] for comprehensive documentation.

* Quick Start

** Installation

#+begin_src emacs-lisp
;; Doom Emacs (packages.el)
(package! majutsu :recipe (:host github :repo "0WD0/majutsu"))

;; use-package + straight.el
(use-package majutsu
  :straight (:host github :repo "0WD0/majutsu"))

;; use-package + package-vc (Emacs 29+)
(use-package majutsu
  :vc (:url "https://github.com/0WD0/majutsu"))
#+end_src

** Usage

1. Open a JJ repository: ~M-x majutsu~ (or ~majutsu-log~)
2. Navigate: ~n~ / ~p~ to move between revisions
3. Act: ~RET~ to visit, ~?~ for help
4. In blob buffers, press ~e~ to enter editable mode; save applies via =jj diffedit= (~i~ in Evil also enters editable mode)
5. In blob buffers, press ~b~ to annotate; ~C-c m~ opens the blob in Magit

** Essential Keybindings (Emacs / Evil)

| Key       | Action               |
|-----------+----------------------|
| ~n~ / ~j~     | Next revision        |
| ~p~ / ~k~     | Previous revision    |
| ~RET~       | Visit thing at point |
| ~?~         | Show all commands    |
| ~g~ / ~g r~   | Refresh              |
| ~a~         | Absorb               |
| ~b~         | Bookmarks            |
| ~c~         | Describe             |
| ~C~         | Commit               |
| ~d~         | Diff                 |
| ~E~         | Ediff                |
| ~e~         | Edit change          |
| ~G~ / none  | Git                  |
| ~k~         | Abandon              |
| ~o~         | New                  |
| ~r~         | Rebase               |
| ~V~ / ~_~     | Revert               |
| ~R~         | Restore              |
| ~s~         | Squash               |
| ~S~         | Split                |
| ~y~         | Duplicate            |
| ~Z~ / ~*~     | Workspaces           |
| ~C-/~ / ~u~   | Undo                 |
| ~C-?~ / ~C-r~ | Redo                 |

* Requirements

- Emacs 29.1+
- [[https://github.com/jj-vcs/jj][Jujutsu (jj)]] v0.37.0+
- [[https://magit.vc/][magit]], [[https://github.com/magit/transient][transient]], [[https://github.com/magit/with-editor][with-editor]]

* Documentation

- [[file:docs/majutsu.org][User Manual]] - Complete guide to all features
- [[file:NEWS.org][NEWS]] - Version history and changelog
- [[file:THIRD_PARTY_NOTICES.org][Third-Party Notices]] - Upstream adaptation and attribution map
- [[file:LICENSE-MIT][Legacy MIT Notice]] - Retained MIT attribution text for pre-GPL code

* License

- Current: [[file:LICENSE][GNU GPL v3 or later]]
- Historical notice: [[file:LICENSE-MIT][MIT notice text]] retained for pre-GPL distributions

* Credits

Majutsu began as a fork of [[https://github.com/bolivier/jj-mode.el][jj-mode.el]] by Brandon Olivier. It depends on
and draws inspiration from [[https://magit.vc/][Magit]] and wraps the [[https://github.com/jj-vcs/jj][Jujutsu]] VCS.

* Contributing

Issues and pull requests welcome at https://github.com/0WD0/majutsu
